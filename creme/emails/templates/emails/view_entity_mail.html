{% extends "creme_core/generics/view_entity.html" %}
{% load i18n %}
{% load media %}
{% load creme_core_tags %}{% load creme_block %}{% load creme_menu %}{% load creme_widgets %}
{% load email_tags %}

{% block logo %}<img src="{% media_url 'images/email_64.png' %}" alt=""/>{% endblock %}

{% block detail_view_left_1 %}
    <table class="table_detail_view ui-corner-all">
        {% get_block_header colspan=2 %}
            {% with object|get_meta_value:"verbose_name" as tmp %}{% with tmp|format:_("Information %s") as title %}
                <th style="width: 80%;" class="collapser">{% get_basic_block_header title 'infos_48.png' _('Information') %}</th>
                <th style="width: 20%;" align="right"></th>
            {% endwith %} {% endwith %}
        {% end_get_block_header %}
        <tbody class="collapsable">
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "User" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">{{object|get_html_field_value:"user"}}</td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Number of reads" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">{{object|get_html_field_value:"reads"}}</td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Status" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">{{object.get_status_str}}</td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Sender" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">{{object|get_html_field_value:"sender"}}</td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Recipient" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">{{object|get_html_field_value:"recipient"}}</td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Subject" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">{{object|get_html_field_value:"subject"}}</td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Reception date" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">{{object|get_html_field_value:"reception_date"}}</td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Attachments" %}</th>
                <td class="td_info {% cycle "block_line_dark" "block_line_light" %}">
                    <ul>
                        {% for doc in object.attachments.all %}
                            <li>
                                <a href="{{doc.get_absolute_url}}">{{doc}}</a>
                            </li>
                        {% endfor %}
                    </ul>
                </td>
            </tr>
            <tr>
                <th class="th_info {% cycle "block_header_line_dark" "block_header_line_light" %}">{% trans "Email body" %}</th>
                <td class="td_info">
                    {{object|get_email_body}}
                </td>
            </tr>
        </tbody>
    </table>
    {% display_block_detailview 'properties_block' %}
    {% display_block_detailview 'relations_block' %}
{% endblock %}
