{% load i18n %}
{% load creme_block %}
<table class="table_detail_view ui-corner-all" id={{block_name}}>
    {% get_block_header colspan=11 %}
        <th style="width: 80%;" class="collapser" align="left">{% get_block_title  _('%s User') _('%s Users') %}</th>
        <th style="width: 20%;" align="right"></th>
    {% end_get_block_header %}
    <tbody class="collapsable">
        <tr>
            <th class="block_header_line_light" style="font-size:14px;" align="left" colspan="100">
                <a class="button_link" href="/creme_config/user/add/">
                    <img src="{{MEDIA_URL}}images/add_22.png" border="0" alt="{% trans "New user" %}"/>
                    {% trans "New user" %}
                </a>
            </th>
        </tr>
        <tr>
            {% get_column_header _("User name") 'username' %}
            {% get_column_header _('Last name') 'last_name' %}
            {% get_column_header _('First name') 'first_name' %}
            <th class="block_header_line_light">{% trans "Role" %}</th>
            {% get_column_header _('Email') 'email' %}
            {% get_column_header _('Super-user ?') 'is_superuser' %}
            {% get_column_header _('Active ?') 'is_active' %}
            {% get_column_header _('Last login') 'last_login' %}
            {% get_column_header _("Date joined") 'date_joined' %}
            <th class="block_header_line_light">{% trans "Actions" %}</th>
            <th class="block_header_line_light">{% trans "Password" %}</th>
        </tr>
        {% for user in page.object_list %}
            <!--{% cycle "block_line_light" "block_line_dark" as row_color %}-->
            <tr>
                <td class="{{row_color}}">{{user.username}}</td>
                <td class="{{row_color}}">{{user.last_name}}</td>
                <td class="{{row_color}}">{{user.first_name}}</td>
                <td class="{{row_color}}">{{user.role|default:_('None')}}</td>
                <td class="{{row_color}}">{{user.email}}</td>
                <td class="{{row_color}}">{{user.is_superuser|yesno:_('Yes,No')}}</td>
                <td class="{{row_color}}">{{user.is_active|yesno:_('Yes,No')}}</td>
                <td class="{{row_color}}">{{user.last_login}}</td>
                <td class="{{row_color}}">{{user.date_joined}}</td>
                <td class="{{row_color}}">
                    <a href="/creme_config/user/edit/{{user.id}}">
                        <img src="{{MEDIA_URL}}images/edit_22.png" border="0" alt="{% trans "Edit" %}" title="{% trans "Edit" %}">
                    </a>
                    {% get_line_deletor at_url '/creme_config/user/delete' with_args "{'id':'{{user.id}}'}" %}
                </td>
                <td class="{{row_color}}">
                    <a href="/creme_config/user/edit/password/{{user.id}}">
                        <img src="{{MEDIA_URL}}images/edit_22.png" border="0" alt="{% trans "Change password" %}" title="{% trans "Change password" %}">
                    </a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
    {% include 'creme_core/templatetags/widgets/block_footer.html' %}
</table>