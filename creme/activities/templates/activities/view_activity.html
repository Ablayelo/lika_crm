{% extends "creme_core/generics/view_entity.html" %}
{% load i18n %}
{% load media %}
{% load creme_block %}{% load activities_tags %}

{% block add_new_button %}{% endblock %}

{% block logo %}
    {% if object.type.id == "activities-activitytype_meeting" %}
        <img src="{% media_url 'images/map_64.png' %}" alt=""/>
    {% else %}
        {% if object.type.id == "activities-activitytype_phonecall" %}
            <img src="{% media_url 'images/phone_64.png' %}" alt=""/>
       {% else %}
              {% if object.type.id == "activities-activitytype_task" %}
                  <img src="{% media_url 'images/task_64.png' %}" alt=""/>
              {% else %}
                  <img src="{% media_url 'images/calendar_64.png' %}" alt=""/>
              {% endif %}
        {% endif %}
    {% endif %}
{% endblock logo %}

{% block creme_blocks_import %}
    {{block.super}}

    {% import_block from_app 'activities' named 'participants' as 'participants_block' %}
    {% import_block from_app 'activities' named 'subjects' as 'subjects_block' %}
{% endblock %}

{% block detail_view_left_1 %}
    {% include "creme_core/object_as_table.html" %}{# TODO: Really need to have the possibility of extending this #}

<!--{% cycle "block_header_line_dark" "block_header_line_light" as header_color %}
    {% cycle "block_line_dark" "block_line_light" as row_color %}-->
    <table class="table_detail_view ui-corner-all">
        {% get_block_header colspan=2 %}
            <th style="width: 80%;" class="collapser">{% get_basic_block_header _('Other Information') 'infos_48.png' _('Information') %}</th>
            <th style="width: 20%;" align="right"></th>
        {% end_get_block_header %}
        <tbody class="collapsable">
            <tr>
                <th class="{% cycle header_color %} th_info">{% trans "Present in calendars" %}</th>
                <td class="{% cycle row_color %} td_info">
                    <ul>
                    {% for calendar in object|get_activity_calendars %}
                        <li>
                            {#<a href=""> Add this with the link when multi-calendars will be implemented #}
                                {{calendar.user}} - {{calendar}}
                            {#</a>#}
                        </li>
                    {% endfor %}
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>

    {% display_block_detailview 'participants_block' %}
    {% display_block_detailview 'subjects_block' %}

    {% display_block_detailview 'properties_block' %}
    {% display_block_detailview 'relations_block' %}
{% endblock %}